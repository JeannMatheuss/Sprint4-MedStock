# üè• MedStock - Sistema de Gest√£o de Estoques Hospitalares

**Tecnologias:** Java | Spring Boot | Oracle | Maven | JUnit

---

## üë• Equipe

| Nome                             | Fun√ß√£o        |
| -------------------------------- | ------------- |
| Jean Matheus Mohamed de Oliveira | Desenvolvedor |
| Pedro Henrique Ribeiro Sampaio   | Desenvolvedor |

---

## üéØ Objetivo

O **MedStock** √© uma aplica√ß√£o desenvolvida em **Java (Spring Boot)** para o controle eficiente de materiais hospitalares.
O sistema permite **cadastro, atualiza√ß√£o, exclus√£o e movimenta√ß√£o de materiais**, al√©m de gerenciar **usu√°rios com autentica√ß√£o e controle de perfis (Admin e Operador)**.
Visa otimizar o gerenciamento de invent√°rio hospitalar, garantindo rastreabilidade e controle de estoque em tempo real.

---

## ‚ú® Funcionalidades Principais

* **Gerenciamento de Materiais:** CRUD completo (Criar, Ler, Atualizar, Deletar) de materiais hospitalares.
* **Movimenta√ß√µes:** Registro de entradas e sa√≠das com v√≠nculo a usu√°rios e datas.
* **Autentica√ß√£o de Usu√°rios:** Login seguro com perfis ADMIN e OPERADOR.
* **Relat√≥rios:** Hist√≥rico de movimenta√ß√µes para auditoria.
* **Valida√ß√µes e Erros:** Regras de neg√≥cio aplicadas (quantidades positivas, campos obrigat√≥rios).
* **Banco de Dados:** Persist√™ncia com Oracle Database.

---

## ‚öôÔ∏è Tecnologias Utilizadas

| Tecnologia      | Finalidade                                           |
| --------------- | ---------------------------------------------------- |
| Java 17         | Linguagem principal                                  |
| Spring Boot     | Framework para APIs RESTful                          |
| Maven           | Gerenciador de depend√™ncias                          |
| Oracle Database | Banco de dados relacional                            |
| JUnit 5         | Testes unit√°rios e de integra√ß√£o                     |
| Postman         | Testes manuais de API                                |
| JDBC            | Conex√£o direta com o banco (via `ConnectionFactory`) |

---

## üß© Arquitetura

O projeto segue o padr√£o **Layered Architecture (Arquitetura em Camadas)**:

| Camada         | Responsabilidade                                          |
| -------------- | --------------------------------------------------------- |
| **Controller** | Exp√µe endpoints REST e trata requisi√ß√µes HTTP             |
| **Service**    | Cont√©m regras de neg√≥cio e l√≥gica de processamento        |
| **DAO**        | Executa opera√ß√µes CRUD no banco de dados via JDBC         |
| **Model**      | Representa entidades de dom√≠nio                           |
| **Util**       | Classes utilit√°rias (ex.: `ConnectionFactory`)            |
| **Exception**  | Tratamento global de exce√ß√µes com `@RestControllerAdvice` |

Essa estrutura promove separa√ß√£o de responsabilidades, testes mais f√°ceis e manuten√ß√£o simplificada.

---

## üóÑÔ∏è Modelo de Banco de Dados (Oracle)

### **Tabela USUARIO**

| Campo  | Tipo                        | Descri√ß√£o                                     |
| ------ | --------------------------- | --------------------------------------------- |
| ID     | NUMBER (PK, Auto-increment) | Identificador √∫nico                           |
| NOME   | VARCHAR2(255)               | Nome completo                                 |
| LOGIN  | VARCHAR2(100)               | Login (√∫nico)                                 |
| SENHA  | VARCHAR2(100)               | Senha (texto simples - usar hash em produ√ß√£o) |
| PERFIL | VARCHAR2(50)                | ADMIN / OPERADOR                              |

---

### **Tabela MATERIAL**

| Campo           | Tipo                        | Descri√ß√£o                     |
| --------------- | --------------------------- | ----------------------------- |
| ID              | NUMBER (PK, Auto-increment) | Identificador √∫nico           |
| NOME            | VARCHAR2(255)               | Nome do material              |
| QUANTIDADE      | NUMBER(10,2)                | Quantidade em estoque         |
| UNIDADE         | VARCHAR2(20)                | Unidade de medida             |
| PONTO_REPOSICAO | NUMBER(10,2)                | Quantidade m√≠nima para alerta |

---

### **Tabela MOVIMENTACAO**

| Campo       | Tipo                        | Descri√ß√£o                   |
| ----------- | --------------------------- | --------------------------- |
| ID          | NUMBER (PK, Auto-increment) | Identificador √∫nico         |
| ID_MATERIAL | NUMBER (FK)                 | Material movimentado        |
| ID_USUARIO  | NUMBER (FK)                 | Usu√°rio respons√°vel         |
| QUANTIDADE  | NUMBER(10,2)                | Quantidade movimentada      |
| TIPO        | VARCHAR2(20)                | ENTRADA / SAIDA             |
| DATA_HORA   | TIMESTAMP                   | Data e hora da movimenta√ß√£o |

---

### **Tabela CONSUMO**

| Campo            | Tipo                        | Descri√ß√£o                |
| ---------------- | --------------------------- | ------------------------ |
| ID               | NUMBER (PK, Auto-increment) | Identificador √∫nico      |
| ID_MATERIAL      | NUMBER (FK)                 | Material consumido       |
| QUANTIDADE       | NUMBER(10,2)                | Quantidade consumida     |
| DATA_APONTAMENTO | TIMESTAMP                   | Data do apontamento      |
| RESPONSAVEL      | VARCHAR2(255)               | Respons√°vel pelo consumo |

---

### **Dados Iniciais**

| Tipo             | Valor                                                                |
| ---------------- | -------------------------------------------------------------------- |
| Usu√°rio admin    | login: `admin` ‚Ä¢ senha: `123` ‚Ä¢ perfil: `ADMIN`                      |
| Material exemplo | nome: `√Ågua` ‚Ä¢ quantidade: `100.00 ml` ‚Ä¢ ponto de reposi√ß√£o: `20.00` |

---

## üîó Endpoints da API

Base URL: `http://localhost:8080/api/`

### **Materiais**

| M√©todo | Endpoint          | Descri√ß√£o                | Exemplo Corpo                                                                   |
| ------ | ----------------- | ------------------------ | ------------------------------------------------------------------------------- |
| GET    | `/materiais`      | Lista todos os materiais | ‚Äî                                                                               |
| GET    | `/materiais/{id}` | Busca por ID             | ‚Äî                                                                               |
| POST   | `/materiais`      | Cria material            | `{"nome": "Soro", "quantidade": 50.0, "unidade": "ml", "pontoReposicao": 10.0}` |
| PUT    | `/materiais/{id}` | Atualiza material        | Mesmo corpo do POST                                                             |
| DELETE | `/materiais/{id}` | Exclui material          | ‚Äî                                                                               |

---

### **Movimenta√ß√µes**

| M√©todo | Endpoint         | Descri√ß√£o             | Exemplo Corpo                                                              |
| ------ | ---------------- | --------------------- | -------------------------------------------------------------------------- |
| GET    | `/movimentacoes` | Lista movimenta√ß√µes   | ‚Äî                                                                          |
| POST   | `/movimentacoes` | Registra movimenta√ß√£o | `{"idMaterial": 1, "idUsuario": 1, "quantidade": 10.0, "tipo": "ENTRADA"}` |

---

### **Usu√°rios**

| M√©todo | Endpoint          | Descri√ß√£o            | Exemplo Corpo                                                                        |
| ------ | ----------------- | -------------------- | ------------------------------------------------------------------------------------ |
| POST   | `/usuarios/login` | Autentica usu√°rio    | `{"login": "admin", "senha": "123"}`                                                 |
| GET    | `/usuarios`       | Lista usu√°rios       | ‚Äî                                                                                    |
| GET    | `/usuarios/{id}`  | Busca usu√°rio por ID | ‚Äî                                                                                    |
| POST   | `/usuarios`       | Cria usu√°rio         | `{"nome": "Jo√£o Silva", "login": "joao", "senha": "senha123", "perfil": "OPERADOR"}` |
| PUT    | `/usuarios/{id}`  | Atualiza usu√°rio     | Mesmo corpo do POST                                                                  |
| DELETE | `/usuarios/{id}`  | Exclui usu√°rio       | ‚Äî                                                                                    |

> **Notas:**
>
> * Autentica√ß√£o simples (use JWT em produ√ß√£o).
> * Retorno em JSON.
> * C√≥digos HTTP indicam erros (400, 404, 500).

---

## üöÄ Como Executar o Projeto

### **Pr√©-requisitos**

* Java 17+
* Maven
* Oracle Database
* Postman ou similar

### **Instala√ß√£o**

```bash
git clone https://github.com/JeannMatheuss/Sprint4-MedStock.git
cd Sprint4-MedStock
```

### **Configura√ß√£o do Banco de Dados**

Execute os scripts SQL no Oracle Database.

Defina vari√°veis no `ConnectionFactory.java` ou via ambiente:

```bash
ORACLE_URL=jdbc:oracle:thin:@oracle.fiap.com.br:1521:orcl
ORACLE_USER=seu_usuario
ORACLE_PASSWORD=sua_senha
```

### **Execu√ß√£o**

```bash
mvn clean install
mvn spring-boot:run
```

A aplica√ß√£o ser√° iniciada em **[http://localhost:8080](http://localhost:8080)**.

---

## üß™ Testes

Executar testes unit√°rios e de integra√ß√£o:

```bash
mvn test
```

**Cobertura:** services, DAOs e controllers.

| Teste                     | Descri√ß√£o                             |
| ------------------------- | ------------------------------------- |
| `MaterialServiceTest`     | Cria√ß√£o e busca de materiais          |
| `MovimentacaoServiceTest` | Registro e valida√ß√£o de movimenta√ß√µes |
| `UsuarioControllerTest`   | Login via MockMvc                     |

---

## üìÅ Estrutura do Projeto

```
medstock/
‚îú‚îÄ‚îÄ src/main/java/com/fiap/stock/
‚îÇ   ‚îú‚îÄ‚îÄ controller/          # Controllers REST
‚îÇ   ‚îú‚îÄ‚îÄ dao/                 # Acesso a dados (DAO)
‚îÇ   ‚îú‚îÄ‚îÄ exception/           # Tratamento de exce√ß√µes
‚îÇ   ‚îú‚îÄ‚îÄ model/               # Entidades (Material, Movimentacao, Usuario, Consumo)
‚îÇ   ‚îú‚îÄ‚îÄ service/             # L√≥gica de neg√≥cio
‚îÇ   ‚îú‚îÄ‚îÄ util/                # Utilit√°rios (ConnectionFactory)
‚îÇ   ‚îî‚îÄ‚îÄ StockApplication.java # Classe principal
‚îú‚îÄ‚îÄ src/test/java/com/fiap/stock/test/  # Testes unit√°rios
‚îú‚îÄ‚îÄ pom.xml                 # Depend√™ncias Maven
‚îî‚îÄ‚îÄ README.md               # Este arquivo
```
